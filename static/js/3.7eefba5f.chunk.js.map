{"version":3,"sources":["hoc/withAuthRedirect.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/ProfileInfo/ProfileStatusWithHooks.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","TypeError","module","exports","Post","console","log","message","className","prof","item","src","likesCount","MyPosts","memo","postsElements","posts","map","p","key","id","s","postsBlock","AddNewPostFormRedux","onSubmit","values","addPost","newPostText","maxLength10","maxLengthCreator","reduxForm","form","handleSubmit","Field","component","Textarea","name","validate","required","placeholder","MyPostsContainer","profilePage","dispatch","addPostActionCreator","ProfileStatusWithHooks","useState","editMode","setEditMode","status","setStatus","useEffect","onDoubleClick","onBlur","updateStatus","onChange","e","currentTarget","autoFocus","ProfileInfo","descriptionBlock","profile","photos","large","aboutMe","Profile","Preloader","ProfileContainer","userId","match","params","authUserId","history","profileThunkCreator","getStatus","compose","withRouter"],"mappings":"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","file":"static/js/3.7eefba5f.chunk.js","sourcesContent":["import React from 'react';\nimport {Redirect} from 'react-router-dom';\nimport {connect} from 'react-redux';\n\nlet mapStateToPropsForRedirect = (state) => ({\n    isAuth: state.auth.isAuth\n});\n\nexport const withAuthRedirect = (Component) => {\n    class RedirectComponent extends React.Component {\n        render(){\n            if (!this.props.isAuth) return <Redirect to={'/login'}/>\n            return <Component {...this.props} />\n        }\n    }\n\n    let ConnecctAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\n    return ConnecctAuthRedirectComponent;\n}\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__3cd8Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__2ifKf\",\"posts\":\"MyPosts_posts__3tZ1c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__ihtu9\"};","import React from 'react';\nimport prof from './Post.module.css';\n\nconst Post = (props) => {\n    console.log(props.message);\n    return(\n        <div className={prof.item}>\n            <img src='https://peopletalk.ru/wp-content/uploads/2016/11/1480331127.jpg'/>\n            {props.message}\n            <div>\n                <span>count of likes is {props.likesCount}</span>\n            </div>\n        </div>\n    );\n}\n\nexport default Post;\n","import React from 'react';\nimport s from './MyPosts.module.css';\nimport Post from './Post/Post';\nimport {Field, reduxForm} from 'redux-form';\nimport {required, maxLengthCreator} from '../../../utils/validators/validators';\nimport {Textarea} from '../../common/FormsControls/FormsControls';\n\n\nconst MyPosts = React.memo( props => {\n    // shouldComponentUpdate(nextProps, nextState){\n    //     return nextProps != this.props || nextState != this.state;\n    // }\n    //render(){\n        console.log('render yo');\n        let postsElements = props.posts.map(p =>\n            <Post key={p.id} message={p.message} likesCount={p.likesCount} />);\n        let onAddPost = (values) =>{\n            //alert(values.newPostText);\n            props.addPost(values.newPostText);\n        };\n        return(\n            <div className={s.postsBlock}>\n                <h3>My posts</h3>\n                <AddNewPostFormRedux onSubmit={onAddPost} />\n                <div className={s.posts}>\n                    {postsElements}\n                </div>\n            </div>\n        );\n    //}\n});\n\nconst maxLength10 = maxLengthCreator(10);\n\nconst AddNewPostForm = (props) => {\n    return (\n        <form onSubmit={props.handleSubmit}>\n            <div>\n                <Field component={Textarea} name={'newPostText'} validate={[required, maxLength10]} placeholder='Post message' />\n            </div>\n            <div>\n                <button>Add post</button>\n            </div>\n        </form>\n    )\n}\n\nconst AddNewPostFormRedux = reduxForm({form: 'profileAddNewPostsForm'})(AddNewPostForm)\n\nexport default MyPosts;\n","import React from 'react';\nimport {addPostActionCreator} from '../../../redux/profile-reducer.js';\nimport MyPosts from './MyPosts.jsx';\nimport {connect} from 'react-redux';\n\nlet  mapStateToProps = (state) => {\n    return {\n        posts: state.profilePage.posts,\n        newPostText: state.profilePage.newPostText\n    }\n};\n\nlet mapDispatchToProps = (dispatch) => {\n    return {\n        addPost: (newPostText)=> {\n            dispatch(addPostActionCreator(newPostText))\n        }\n    }\n};\n\nconst MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts);\n\nexport default MyPostsContainer;\n","import React, {useState,useEffect} from 'react';\nimport s from './ProfileInfo.module.css';\n\nconst ProfileStatusWithHooks = (props) => {\n\n    let [editMode, setEditMode] = useState(false);\n    let [status, setStatus] = useState(props.status);\n\n    useEffect ( () => {\n        setStatus(props.status);\n    },[props.status]);\n\n    const activateEditMode = () => {\n        setEditMode(true);\n    }\n\n    const deactivateEditMode = () => {\n        setEditMode(false);\n        props.updateStatus(status);\n    }\n\n    const onStatusChange = (e) => {\n        setStatus(e.currentTarget.value);\n    }\n\n    return (\n        <div>\n            { !editMode &&\n                <div>\n                    <span onDoubleClick={activateEditMode}>{props.status || \"-----\"}</span>\n                </div>\n            }\n            {editMode &&\n                <div>\n                    <input onBlur={deactivateEditMode} onChange={onStatusChange}\n                            value={status} autoFocus={true} />\n                </div>\n            }\n        </div>\n    );\n}\n\nexport default ProfileStatusWithHooks;\n","import React from 'react';\nimport s from './ProfileInfo.module.css';\nimport ProfileStatusWithHooks from './ProfileStatusWithHooks';\n\nconst ProfileInfo = (props) => {\n    return (\n        <div>\n            <div>\n                <img src='https://thumbor.forbes.com/thumbor/960x0/https%3A%2F%2Fblogs-images.forbes.com%2Fjohnwelsheurope%2Ffiles%2F2019%2F05%2FScreenshot-2019-05-05-at-19.30.12-1200x709.jpg'/>\n            </div>\n            <div className={s.descriptionBlock}>\n                <img src={props.profile.photos.large}/>\n                <h5>About me</h5>\n                <p>{props.profile.aboutMe}</p>\n                <ProfileStatusWithHooks status={props.status} updateStatus={props.updateStatus}/>\n            </div>\n        </div>\n    );\n}\n\nexport default ProfileInfo;\n","import React from 'react';\nimport s from './Profile.module.css';\nimport MyPostsContainer from './MyPosts/MyPostsContainer';\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\nimport Preloader from '../common/preloader/Preloader';\n\nconst Profile = ({profile, status, updateStatus}) => {\n    if (!profile){\n        return <Preloader />\n    }\n    return (\n        <div>\n            <ProfileInfo profile={profile} status={status} updateStatus={updateStatus}/>\n            <MyPostsContainer />\n        </div>\n    );\n}\n\nexport default Profile;\n","import React from 'react';\nimport s from './Profile.module.css';\nimport Profile from './Profile';\nimport {connect} from 'react-redux';\nimport {profileThunkCreator, getStatus, updateStatus} from '../../redux/profile-reducer';\nimport {withRouter} from 'react-router-dom';\nimport {withAuthRedirect} from '../../hoc/withAuthRedirect';\nimport {compose} from 'redux';\n\nclass ProfileContainer extends React.Component{\n    componentDidMount(){\n        let userId = this.props.match.params.userId;\n        if (!userId) {\n            userId = this.props.authUserId; //4910;\n            if (!userId) {\n                this.props.history.push(\"/login\"); //плохой вариант редиректа\n            }\n        };\n        this.props.profileThunkCreator(userId);\n        this.props.getStatus(userId);\n    }\n\n    render (){\n        //if (!this.props.isAuth) return <Redirect to={'/login'}/>\n        return (\n            <Profile {...this.props}\n                    profile={this.props.profile}\n                    status={this.props.status}\n                    updateStatus={this.props.updateStatus}/>\n        );\n    }\n}\n\nlet mapStateToProps = (state) => ({\n    profile: state.profilePage.profile,\n    status: state.profilePage.status,\n    authUserId: state.auth.userId,\n    isAuth: state.auth.isAuth\n});\n\nexport default compose(\n    connect(mapStateToProps, {profileThunkCreator, getStatus, updateStatus}),\n    withRouter\n    //withAuthRedirect\n)(ProfileContainer);\n"],"sourceRoot":""}